<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../shy-elt-freewall/shy-elt-freewall.html">

<polymer-element name="shy-elt-boggle" attributes="noTime">
  <template>
    <style>
      .dice{
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
        text-align: center;
        font-weight: bold;
        font-size: -webkit-xxx-large;
        font-family: sans-serif;
      }
    </style>
    <div style="width:500px;height:500px;">
      <shy-elt-freewall id="container"></shy-elt-freewall>
    </div>
    <template if="{{ (!noTime) && (_time > 0)}}">
      <div id="chrono">{{_time}}</div>
    </template>
    <template if="{{ (!noTime) && (_time <= 0)}}">
      <div id="chrono">TIME OUT !</div>
    </template>

  </template>
  <script>
    var dices = [
      ["E", "T", "U", "K", "N", "O"],
      ["E", "V", "G", "T", "I", "N"],
      ["D", "E", "C", "A", "M", "P"],
      ["I", "E", "L", "R", "U", "W"],
      ["E", "H", "I", "F", "S", "E"],
      ["R", "E", "C", "A", "L", "S"],
      ["E", "N", "T", "D", "O", "S"],
      ["O", "F", "X", "R", "I", "A"],
      ["N", "A", "V", "E", "D", "Z"],
      ["E", "I", "O", "A", "T", "A"],
      ["G", "L", "E", "N", "Y", "U"],
      ["B", "M", "A", "Q", "J", "O"],
      ["T", "L", "I", "B", "R", "A"],
      ["S", "P", "U", "L", "T", "E"],
      ["A", "I", "M", "S", "O", "R"],
      ["E", "N", "H", "R", "I", "S"]
    ];
    Polymer('shy-elt-boggle',{
      noTime: false,
      _time:180,
      domReady: function(){
        for(var diceIdx in dices){

          var currentDice = dices[diceIdx];
          var randIdx = Math.floor((Math.random() * currentDice.length));
          var divDice = document.createElement('div');
          var innerDivDice = document.createElement('div');
          divDice.className = "dice";
          innerDivDice.textContent = currentDice[randIdx];
          divDice.appendChild(innerDivDice);
          this.$.container.appendChild(divDice);
        }

        var self = this;
        setInterval(function(){
          if(!self._time == 0){
            self._time --;
          }
        },1000);
      }
    });
  </script>
</polymer-element>